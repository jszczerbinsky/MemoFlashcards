(function(){"use strict";var e={5001:function(e,t,i){var n=i(9242),s=i(3396);const a=(0,s._)("div",{id:"logo"},"MemoFlashcards",-1);function r(e,t,i,n,r,o){const l=(0,s.up)("AddCards"),d=(0,s.up)("SetList"),c=(0,s.up)("CardView");return(0,s.wg)(),(0,s.iD)(s.HY,null,[a,"edit"===r.action?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0),"menu"===r.action?((0,s.wg)(),(0,s.j4)(d,{key:1})):(0,s.kq)("",!0),"review"===r.action?((0,s.wg)(),(0,s.j4)(c,{key:2})):(0,s.kq)("",!0)],64)}i(560);var o=i(7139);const l=e=>((0,s.dD)("data-v-45f7491c"),e=e(),(0,s.Cn)(),e),d={id:"container"},c={id:"overflow-container",ref:"overflowcontainer"},h=l((()=>(0,s._)("p",{class:"left lr"},"I don't remember",-1))),u=l((()=>(0,s._)("p",{class:"right lr"},"I remember",-1))),p={id:"content"},v={id:"button-container"};function b(e,t,i,a,r,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",d,[(0,s._)("div",c,[(0,s.Wm)(n.uT,{name:"flip",onEnter:l.onEnter},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)("div",{class:(0,o.C_)({cardbgback:r.flipped,cardbgfront:!r.flipped}),key:r.flipping,id:"card",ref:"card",onClick:t[0]||(t[0]=e=>l.cardClick()),onMousedown:t[1]||(t[1]=(...e)=>l.cardMouseDown&&l.cardMouseDown(...e)),onTouchstart:t[2]||(t[2]=(...e)=>l.cardTouchDown&&l.cardTouchDown(...e))},[h,u,(0,s._)("p",p,(0,o.zw)(r.flipped?r.backText:r.frontText),1)],34))])),_:1},8,["onEnter"])],512)]),(0,s._)("div",v,[(0,s._)("button",{className:"btn green-btn",onClick:t[3]||(t[3]=()=>{l.getCurrentCard().learned=!0,l.nextCard()})},"Mark as learned"),(0,s._)("button",{className:"btn red-btn",onClick:t[4]||(t[4]=()=>{e.$parent.action="menu"})},"Exit")])])}var g={name:"CardView",mounted(){this.shuffleCards(),this.nextCard()},data(){return{answer:null,currentCard:-1,dragging:!1,baseXPos:0,frontText:"",backText:"",flipping:!1,flipped:!1}},methods:{read(e,t){var i=new SpeechSynthesisUtterance(e);i.rate=.7,i.pitch=1,i.voice=this.$parent.voices.find((e=>e.name===t)),i.lang=this.$parent.voices.find((e=>e.name===t)).lang,window.speechSynthesis.speak(i)},onEnter(){this.flipped=!this.flipped,this.flipped?this.read(this.getCurrentCard().invisible,this.$parent.getSelectedSet().invisibleVoice):this.read(this.getCurrentCard().visible,this.$parent.getSelectedSet().visibleVoice)},shuffleCards(){this.$parent.getSelectedSet().cardlist.sort((()=>Math.random()-.5))},getCurrentCard(){return this.$parent.getSelectedSet().cardlist[this.currentCard]},isHidden(e){return this.$parent.isHidden(e)},nextCard(){if(this.flipped=!1,this.$parent.syncData(),void 0===this.$parent.getSelectedSet().cardlist.find((e=>!this.isHidden(e))))return this.$parent.action="menu";do{this.currentCard++,this.currentCard===this.$parent.getSelectedSet().cardlist.length&&(this.currentCard=0,this.shuffleCards())}while(this.isHidden(this.getCurrentCard()));this.backText=this.getCurrentCard().invisible,this.frontText=this.getCurrentCard().visible,this.read(this.getCurrentCard().visible,this.$parent.getSelectedSet().visibleVoice)},cardClick(){this.dragging||(this.flipping=!this.flipping)},getScreenCenter(){return window.innerWidth/2},handleMovement(e){let t=this.baseXPos-this.getScreenCenter(),i=e-150-t;this.$refs.card.style.left=i+"px";let n=this.getScreenCenter()-150-i;Math.abs(n)<1&&(n=1),this.$refs.card.style.opacity=1/(Math.abs(n)/50),Math.abs(n)>this.getScreenCenter()/2?this.answer=n>0?"left":"right":this.answer=null},mouseMove(e){this.handleMovement(e.clientX),this.dragging=!0},touchMove(e){var t="undefined"===typeof e.originalEvent?e:e.originalEvent;let i=t.touches[0]||t.changedTouches[0];this.handleMovement(i.pageX)},handleDown(){this.$refs.overflowcontainer.classList.remove("fadein"),this.$el.addEventListener("mousemove",this.mouseMove),this.$el.addEventListener("touchmove",this.touchMove),this.$el.addEventListener("mouseup",this.cardMouseUp),this.$el.addEventListener("touchend",this.cardMouseUp)},cardMouseDown(e){this.baseXPos=e.clientX,this.handleDown()},cardTouchDown(e){var t="undefined"===typeof e.originalEvent?e:e.originalEvent;let i=t.touches[0]||t.changedTouches[0];this.baseXPos=i.pageX,this.handleDown()},cardAdvance(){let e=new Date(Date.now());e.setDate(e.getDate()+this.getCurrentCard().level),this.getCurrentCard().hideUntil=e.toISOString(),this.getCurrentCard().correctStreak=0,this.getCurrentCard().level++},cardMouseUp(){if(this.$el.removeEventListener("mousemove",this.mouseMove),this.$el.removeEventListener("touchmove",this.touchMove),this.$el.removeEventListener("mouseup",this.cardMouseUp),null!==this.answer){const e=this.getCurrentCard();"left"===this.answer?(e.level=1,e.correctStreak=0):(e.correctStreak++,e.correctStreak>=3&&this.cardAdvance()),this.$refs.overflowcontainer.classList.add("fadein"),this.nextCard()}this.baseXPos=this.getScreenCenter(),this.handleMovement(this.getScreenCenter()),setTimeout((()=>this.dragging=!1))}}},f=i(89);const m=(0,f.Z)(g,[["render",b],["__scopeId","data-v-45f7491c"]]);var C=m,w=i.p+"img/edit.2dd0abc5.svg";const S={id:"container"},y={className:"header-bar"},$=["onClick"],k={className:"button-container"},_=["onClick"],D=["onClick"],x=["onClick"];function V(e,t,i,n,a,r){return(0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("button",{className:"btn green-btn",id:"create-btn",onClick:t[0]||(t[0]=()=>{this.$parent.pushEmptySet()})},"Create new set"),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$parent.appdata.sets,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{className:"set-container wnd",key:e.name},[(0,s._)("div",y,[(0,s._)("header",null,(0,o.zw)(e.name),1),(0,s._)("img",{onClick:()=>{r.editName(t)},src:w},null,8,$)]),(0,s._)("p",null,"Cards to review today: "+(0,o.zw)(e.cardlist.filter((e=>!r.isHidden(e))).length||"0"),1),(0,s._)("p",null,"Total cards: "+(0,o.zw)(e.cardlist.length||"0"),1),(0,s._)("div",k,[(0,s._)("button",{className:"btn yellow-btn",onClick:()=>{r.editCards(t)}},"Edit cards",8,_),(0,s._)("button",{className:"btn red-btn",onClick:()=>{r.deleteSet(t)}},"Delete",8,D),(0,s._)("button",{className:"btn review-btn green-btn",onClick:()=>{r.reviewSet(t)}},"Review",8,x)])])))),128))])}var E={name:"SetList",mounted(){},data(){return{renaming:!1}},methods:{isHidden(e){return this.$parent.isHidden(e)},editCards(e){this.$parent.selectedSet=e,this.$parent.action="edit"},editName(e){const t=prompt("Change name",this.$parent.appdata.sets[e].name);null!==t&&(this.$parent.appdata.sets[e].name=t,this.$parent.syncData())},reviewSet(e){this.$parent.selectedSet=e,this.$parent.action="review"},deleteSet(e){window.confirm("Are you sure, that you want to delete '"+this.$parent.appdata.sets[e].name+"' set?")&&(this.$parent.appdata.sets.splice(e,1),this.$parent.syncData())}}};const M=(0,f.Z)(E,[["render",V],["__scopeId","data-v-7836db2a"]]);var N=M;const T=e=>((0,s.dD)("data-v-1cc79683"),e=e(),(0,s.Cn)(),e),O={id:"container"},I={class:"top-button-container"},H=T((()=>(0,s._)("p",null,"Front side voice",-1))),U=T((()=>(0,s._)("p",null,"Back side voice",-1))),A={class:"main-button-container"},L={id:"cardlist"},j=["onClick"],F={class:"bold"},J=["onClick"],X=["onClick"],z=["onClick"];function P(e,t,i,a,r,l){return(0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",I,[(0,s._)("button",{class:"btn yellow-btn",onClick:t[0]||(t[0]=()=>{l.importCsv()})},"Import from csv"),(0,s._)("button",{class:"btn yellow-btn",onClick:t[1]||(t[1]=()=>{l.exportCsv()})},"Export to csv")]),H,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.visibleVoice=e),onChange:t[3]||(t[3]=e=>l.visibleVoiceChange(e))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$parent.voices,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.name},(0,o.zw)(e.name),1)))),128))],544),[[n.bM,r.visibleVoice]]),U,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.invisibleVoice=e),onChange:t[5]||(t[5]=e=>l.invisibleVoiceChange(e))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$parent.voices,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.name},(0,o.zw)(e.name),1)))),128))],544),[[n.bM,r.invisibleVoice]]),(0,s.wy)((0,s._)("input",{id:"visibleinput",ref:"visibleinput","onUpdate:modelValue":t[6]||(t[6]=e=>r.visible=e),type:"textbox",placeholder:"Visible side",onKeyup:t[7]||(t[7]=(0,n.D2)(((...e)=>l.onEnterVisible&&l.onEnterVisible(...e)),["enter"]))},null,544),[[n.nr,r.visible]]),(0,s.wy)((0,s._)("input",{ref:"invisibleinput","onUpdate:modelValue":t[8]||(t[8]=e=>r.invisible=e),type:"textbox",placeholder:"Invisible side",onKeyup:t[9]||(t[9]=(0,n.D2)(((...e)=>l.onEnterInvisible&&l.onEnterInvisible(...e)),["enter"]))},null,544),[[n.nr,r.invisible]]),(0,s._)("div",A,[(0,s._)("button",{id:"exit-btn",class:"btn red-btn",onClick:t[10]||(t[10]=()=>{e.$parent.action="menu"})},"Exit"),(0,s._)("button",{id:"add-btn",class:"btn green-btn",onClick:t[11]||(t[11]=()=>{l.pushNewCard(r.visible,r.invisible)})},"Add")]),(0,s._)("div",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.$parent.getSelectedSet().cardlist,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e.name,class:"card wnd",onClick:()=>r.selectedIndex=t},[(0,s._)("header",F,(0,o.zw)(e.visible),1),(0,s._)("header",{class:(0,o.C_)({nodisplay:r.selectedIndex!=t})},(0,o.zw)(e.invisible),3),(0,s._)("div",{class:(0,o.C_)([{nodisplay:r.selectedIndex!=t},"button-container"])},[(0,s._)("button",{className:"btn yellow-btn",onClick:()=>{l.editVisible(t)}},"Edit visible",8,J),(0,s._)("button",{className:"btn yellow-btn",onClick:()=>{l.editInvisible(t)}},"Edit invisible",8,X),(0,s._)("button",{className:"btn red-btn delete-btn",onClick:()=>{l.deleteCard(t)}},"Delete",8,z)],2)],8,j)))),128))])])}const K={correctStreak:0,level:1,hideUntil:new Date(0),learned:!1};var Y={name:"AddCards",mounted(){this.visibleVoice=this.$parent.getSelectedSet().visibleVoice,this.invisibleVoice=this.$parent.getSelectedSet().invisibleVoice},data(){return{invisible:"",visible:"",selectedIndex:0,visibleVoice:"",invisibleVoice:""}},methods:{visibleVoiceChange(e){this.$parent.getSelectedSet().visibleVoice=e.target.value,this.$parent.syncData()},invisibleVoiceChange(e){this.$parent.getSelectedSet().invisibleVoice=e.target.value,this.$parent.syncData()},exportCsv(){let e="";this.$parent.getSelectedSet().cardlist.forEach((t=>{e+=t.visible+";"+t.invisible+"\n"})),this.$parent.downloadTextFile(this.$parent.getSelectedSet().name+".csv",e)},async importCsv(){const e=await this.$parent.uploadTextFile(),t=e.split("\n");t.forEach((e=>{const t=e.split(";",2);this.pushNewCard(t[0],t[1])}))},editVisible(e){const t=prompt("Change name",this.$parent.getSelectedSet().cardlist[e].visible);null!==t&&(this.$parent.getSelectedSet().cardlist[e].visible=t,this.$parent.syncData())},editInvisible(e){const t=prompt("Change name",this.$parent.getSelectedSet().cardlist[e].invisible);null!==t&&(this.$parent.getSelectedSet().cardlist[e].invisible=t,this.$parent.syncData())},deleteCard(e){window.confirm("Are you sure, that you want to delete this card?")&&(this.$parent.getSelectedSet().cardlist.splice(e,1),this.$parent.syncData())},pushNewCard(e,t){let i=JSON.parse(JSON.stringify(K));i.invisible=t,i.visible=e,e&&t&&(this.$parent.getSelectedSet().cardlist.push(i),this.$parent.syncData()),this.invisible="",this.visible="",this.$refs.visibleinput.focus()},onEnterVisible(){this.$refs.invisibleinput.focus()},onEnterInvisible(){this.pushNewCard(this.visible,this.invisible)}}};const Z=(0,f.Z)(Y,[["render",P],["__scopeId","data-v-1cc79683"]]);var q=Z,R=i(466);const W={sets:[]},B={name:"Unnamed set",cardlist:[],visibleVoice:"",invisibleVoice:""};var G={name:"App",created(){localStorage.config||(localStorage.config=JSON.stringify(W)),this.appdata=JSON.parse(localStorage.config)},mounted(){window.speechSynthesis.cancel(),setTimeout((()=>{this.voices=window.speechSynthesis.getVoices()}),1e3)},data(){return{action:"menu",selectedSet:0,appdata:JSON.parse(JSON.stringify(W)),voices:[]}},methods:{downloadTextFile(e,t){let i=document.createElement("a");i.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(t)),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},uploadTextFile(){return new Promise((e=>{const{open:t,onChange:i}=(0,R.vkH)({accept:"text/*",directory:!1});i((t=>{if(1===t.length){const i=new FileReader;i.onload=t=>{e(t.target.result)},i.onerror=e=>console.log(e),i.readAsText(t[0])}})),t()}))},isHidden(e){const t=new Date(e.hideUntil),i=new Date(Date.now());return i<t||e.learned},pushEmptySet(){this.appdata.sets.push(JSON.parse(JSON.stringify(B))),this.syncData()},getSelectedSet(){return this.appdata.sets[this.selectedSet]},syncData(){localStorage.config=JSON.stringify(this.appdata)}},components:{CardView:C,SetList:N,AddCards:q}};const Q=(0,f.Z)(G,[["render",r]]);var ee=Q;(0,n.ri)(ee).mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,a){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],a=e[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(o=!1,a<r&&(r=a));if(o){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,s,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/MemoFlashcards/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,r=n[0],o=n[1],l=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var c=l(i)}for(t&&t(n);d<r.length;d++)a=r[d],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(5001)}));n=i.O(n)})();
//# sourceMappingURL=app.09ccba59.js.map